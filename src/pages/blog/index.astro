---
import { getCollection } from 'astro:content';
import { Image } from 'astro:assets';
import BaseLayout from '../../layouts/BaseLayout.astro';
import pfpImage from '../../assets/images/about-me/pfp.jpg';

const posts = await getCollection('blog');
const sortedPosts = posts.sort((a, b) => b.data.date.getTime() - a.data.date.getTime());
---

<BaseLayout title="blog | muffin">
  <main class="hymnals-blog">
    <div class="hymnals-container">
      <Image 
        src={pfpImage} 
        alt="Profile" 
        class="hymnals-pfp"
        width={100}
        height={100}
      />
      <h1 class="hymnals-title">
        muffin's blog page :3
      </h1>

      <ul class="hymnals-post-list">
        {sortedPosts.map((post) => (
          <li>
            <span class="hymnals-date">{post.data.date.toISOString().split('T')[0]}</span>{' '}
            <a href={`/blog/${post.id}`} class="hymnals-post-link">
              {post.data.title}
            </a>
          </li>
        ))}
      </ul>
    </div>
  </main>
</BaseLayout>
